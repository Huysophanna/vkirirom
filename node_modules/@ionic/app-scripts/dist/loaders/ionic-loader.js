"use strict";
var logger_1 = require('../util/logger');
var helpers_1 = require('../util/helpers');
var transpiledFiles = helpers_1.getCachedTranspiledTsFiles();
module.exports = function ionicLoader(source, map) {
    this.cacheable();
    if (transpiledFiles) {
        var file = transpiledFiles[this.resourcePath];
        if (file) {
            logger_1.Logger.debug("Using in-memory file for " + this.resourcePath);
            this.callback(null, file.output, file.map);
        }
        else {
            logger_1.Logger.debug("Using persisted file for " + this.resourcePath);
            transpiledFiles[this.resourcePath] = {
                map: map,
                output: source
            };
            this.callback(null, source, map);
        }
    }
    else {
        this.callback(null, source, map);
    }
};
